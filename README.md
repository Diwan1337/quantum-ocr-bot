
<h1 align="center">Quantum‚ÄëOCR¬†Bot¬†ü§ñüî¨</h1>
<p align="center">
  –¢–µ–ª–µ–≥—Ä–∞–º‚Äë–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∫—Ä–∏–Ω—ã –±–∞–ª–ª–æ–≤ –ï–ì–≠/–û–ì–≠, 
  —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –∏—Ö —Å –ø–æ–º–æ—â—å—é Tesseract¬†OCR –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  —Å–≤–µ—Ä—è–µ—Ç —Å Google¬†Sheets.
</p>

<p align="center">
  <img src="https://img.shields.io/badge/python-3.11%2B-blue?logo=python">
  <img src="https://img.shields.io/badge/aiogram-3.x-blueviolet">
  <img src="https://img.shields.io/badge/Tesseract-5.x-brightgreen">
  <img src="https://img.shields.io/badge/License-MIT-yellow">
</p>

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç](#-—á—Ç–æ-—É–º–µ–µ—Ç-–±–æ—Ç)
2. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`](#Ô∏è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-env)
4. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Google¬†Sheets](#Ô∏è-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-google-sheets)
5. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Tesseract‚ÄëOCR](#Ô∏è-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-tesseract-ocr)
6. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
7. [–°–ª–æ–≤–∞—Ä—å –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (`ALIASES`)](#Ô∏è-—Å–ª–æ–≤–∞—Ä—å-–ø—Ä–µ–¥–º–µ—Ç–æ–≤-aliases)
8. [–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Docker](#üê≥-—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ-–≤-docker)
9. [FAQ / Troubleshooting](#-faq--troubleshooting)
10. [Contributing](#Ô∏è-contributing)
11. [License](#-license)

---

## üöÄ –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç

| –®–∞–≥ | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|
| 1.  | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—Ñ–æ—Ç–æ¬†/¬†—Å–∫—Ä–∏–Ω) –≤¬†–±–æ—Ç. |
| 2.  | –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª –∏ —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á—É –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ—á–µ—Ä–µ–¥—å. |
| 3.  | –í–æ—Ä–∫–µ—Ä ‚Üí <br>‚Ä¢ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É (resize¬†√ó3, CLAHE, threshold) <br>‚Ä¢ Tesseract¬†OCR (`rus`) ‚Üí —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç <br>‚Ä¢ regex¬†–≤—ã–¥—ë—Ä–≥–∏–≤–∞–µ—Ç –ø–∞—Ä—ã ¬´–ø—Ä–µ–¥–º–µ—Ç¬†‚Äî¬†–±–∞–ª–ª¬ª. |
| 4.  | –ü—Ä–µ–¥–º–µ—Ç—ã –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `ALIASES` ‚Üí `math`,¬†`phys`,¬†`rus` –∏¬†—Ç.–¥. |
| 5.  | –í Google¬†Sheet: <br>‚Ä¢ –µ—Å–ª–∏ `tg_id` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç¬†‚Üí —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞; <br>‚Ä¢ –µ—Å–ª–∏ –µ—Å—Ç—å¬†‚Üí —Å–≤–µ—Ä–∫–∞ –±–∞–ª–ª–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–ª–∏—á–∞—é—â–∏—Ö—Å—è (+¬†–¥–æ–ø—É—Å–∫¬†¬±1). |
| 6.  | –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: **‚úÖ¬†–ë–∞–ª–ª—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã!** –∏–ª–∏ **‚ö†Ô∏è¬†–û—à–∏–±–∫–∞**. |

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ –∏ –∑–∞—Ö–æ–¥–∏–º
```
git clone https://github.com/<username>/quantum-ocr-bot.git
```
```
cd quantum-ocr-bot
```

# 2. –°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```
python -m venv venv 
```
```
source venv/bin/activate      # Windows: venv\Scripts\activate
```

# 3. –°—Ç–∞–≤–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
pip install -r requirements.txt
```

# 4. –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥ –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º
```
cp .env.example .env          # –æ—Ç–∫—Ä–æ–π .env –∏ –≤–ø–∏—à–∏ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è
```

# 5. –ó–∞–ø—É—Å–∫
```
python bot.py
```
> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** `.env` –∏ `google_key.json` –Ω–µ –ø—É–±–ª–∏–∫—É–µ–º, –æ–Ω–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è `.gitignore`.

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`

| –ö–ª—é—á                | –û–ø–∏—Å–∞–Ω–∏–µ                                                                           |
| ------------------- | ---------------------------------------------------------------------------------- |
| **BOT\_TOKEN**      | –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram‚Äë–±–æ—Ç–∞ –æ—Ç¬†`@BotFather`.                                        |
| **SPREADSHEET\_ID** | ID Google‚Äë—Ç–∞–±–ª–∏—Ü—ã (—Å—Ç—Ä–æ–∫–∞ –º–µ–∂–¥—É `/d/` –∏ `/edit`).                                  |
| **SHEET\_NAME**     | –ò–º—è –ª–∏—Å—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬†`EGE`).                                                    |
| **SERVICE\_KEY**    | –ü—É—Ç—å –∫ JSON‚Äë–∫–ª—é—á—É —Å–µ—Ä–≤–∏—Å‚Äë–∞–∫–∫–∞—É–Ω—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬†`google_key.json`).                |
| **TESSERACT\_PATH** | (Win) –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –¥–æ `tesseract.exe`. –ù–∞ Linux/WSL –Ω–µ –Ω—É–∂–µ–Ω, –µ—Å–ª–∏ –±–∏–Ω–∞—Ä—å –≤¬†`PATH`. |

---

## üóÇÔ∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Google¬†Sheets

1. –°–æ–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü—É ‚Üí –Ω–∞–∑–æ–≤–∏ –ª–∏—Å—Ç¬†`EGE` (–∏–ª–∏ –ª—é–±–æ–µ –∏–º—è¬†‚Üí —É–∫–∞–∂–∏ –≤ `.env`).
2. –í **–ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ** –∑–∞–≥–æ–ª–æ–≤–∫–∏:

   ```
   tg_id | math | rus | phys | ...
   ```
3. –í Google¬†Cloud Console:

   * **IAM¬†&¬†Admin ‚Üí Service accounts ‚Üí + Create** ‚Üí JSON‚ÄØkey.
   * –®–∞—Ä–∏–º —Ç–∞–±–ª–∏—Ü—É –Ω–∞ e‚Äëmail —Å–µ—Ä–≤–∏—Å‚Äë–∞–∫–∫–∞—É–Ω—Ç–∞ (—Ä–æ–ª—å *Editor*).
4. –ü–æ–ª–æ–∂–∏ JSON‚Äë—Ñ–∞–π–ª –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí –Ω–∞–∑–æ–≤–∏ `google_key.json` (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π `SERVICE_KEY`).

---

## üõ†Ô∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Tesseract‚ÄëOCR

| –û–°              | –î–µ–π—Å—Ç–≤–∏–µ                                                                                                                                              |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Windows**     | –°–∫–∞—á–∞–π `tesseract-ocr-w64-setup-5.x.exe` (—Ä–µ–ø–æ Mannheim). –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ ‚Äî –≥–∞–ª–æ—á–∫–∞ **‚ÄúAdd to PATH‚Äù** –∏ –≤—ã–±–µ—Ä–∏ —è–∑—ã–∫ **Russian**. –ü—Ä–æ–ø–∏—à–∏ –ø—É—Ç—å –≤¬†`.env`. |
| **Linux / WSL** | `sudo apt install tesseract-ocr tesseract-ocr-rus`                                                                                                    |
| **macOS**       | `brew install tesseract-lang` (Homebrew —É–∂–µ —Å—Ç–∞–≤–∏—Ç `rus`).                                                                                            |

–ü—Ä–æ–≤–µ—Ä—å:  `tesseract --version`  ‚Üí –≤–µ—Ä—Å–∏—è ‚â•‚ÄØ5.x.

---

## üó∫Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
bot.py           # Telegram side (aiogram): –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–µ–¥–∏–∞, —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á—É.
worker.py        # OCR + Google Sheets + –ª–æ–≥–∏–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏.
requirements.txt
.env.example
.gitignore
README.md
```

---

## üìù –°–ª–æ–≤–∞—Ä—å –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (`ALIASES`)

```python
ALIASES = {
    "–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª—å–Ω–∞—è": "math",
    "–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª—å":    "math",
    "—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫":          "rus",
    "—Ñ–∏–∑–∏–∫–∞":                "phys",
}
```

*–î–æ–±–∞–≤—å —Å–≤–æ–∏ –ø–∞—Ä—ã ¬´–∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω–µ¬ª ‚Üí ¬´–∫–∞–∫ –≤ –∫–æ–ª–æ–Ω–∫–µ¬ª.
OCR –º–µ—á–µ—Ç —Å—Ç—Ä–æ—á–Ω—ã–µ, —Ç–∞–∫ —á—Ç–æ `.lower()` —É–∂–µ –≤–∫–ª—é—á—ë–Ω.*

---

## üê≥ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Docker

```dockerfile
# Dockerfile
FROM python:3.11-slim

# 1. Tesseract
RUN apt-get update && \
    apt-get install -y tesseract-ocr tesseract-ocr-rus libglib2.0-0 && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .

# .env –∏ google_key.json –ø–µ—Ä–µ–¥–∞—ë–º –∫–∞–∫ volumes / secrets
CMD ["python", "bot.py"]
```

–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:

```bash
docker build -t quantum-ocr-bot .
docker run --env-file .env -v $(pwd)/google_key.json:/app/google_key.json quantum-ocr-bot
```

---

## ‚ùì FAQ / Troubleshooting

| –û—à–∏–±–∫–∞ / –°–∏–º–ø—Ç–æ–º                                 | –ü—Ä–∏—á–∏–Ω–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ                                                            |
| ------------------------------------------------ | ---------------------------------------------------------------------------- |
| `TokenValidationError: NoneType`                 | BOT\_TOKEN –Ω–µ –∑–∞–¥–∞–Ω –≤ `.env`.                                                |
| `SpreadsheetNotFound 404`                        | –ù–µ–≤–µ—Ä–Ω—ã–π `SPREADSHEET_ID` **–∏–ª–∏** —Å–µ—Ä–≤–∏—Å‚Äë–∞–∫–∫–∞—É–Ω—Ç –Ω–µ¬†–∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ. |
| `pytesseract.pytesseract.TesseractNotFoundError` | Tesseract –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ `TESSERACT_PATH` –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.                   |
| –ü—É—Å—Ç–æ–π `RAW OCR`                                 | –°–∫—Ä–∏–Ω —Å–ª–∏—à–∫–æ–º –º–µ–ª–∫–∏–π ‚Üí –≤–∫–ª—é—á–∏ upscale √ó3, CLAHE (—É–∂–µ –ø–æ —É–º–æ–ª—á.).             |
| –ë–æ—Ç –ø–∏—à–µ—Ç ¬´–ù–µ —Å–æ–≤–ø–∞–ª–æ‚Ä¶¬ª                          | –í —Ç–∞–±–ª–∏—Ü–µ –Ω–µ—Ç —Å—Ç—Ä–æ–∫–∏ —Å `tg_id`. –ë–æ—Ç –µ—ë —Å–æ–∑–¥–∞—Å—Ç, –µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω `upsert_row`.   |

---

## ü§ù Contributing

Pull‚Äërequests –∏¬†issues –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!
–§–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–∞¬†‚Äî Conventional Commits (`feat:`,¬†`fix:`,¬†`docs:` ‚Ä¶).
–ü–µ—Ä–µ–¥ PR –∑–∞–ø—É—Å—Ç–∏ `black .` –∏ `flake8`.

---

## üìÑ License

MIT.  –ò—Å–ø–æ–ª—å–∑—É–π, —Ñ–æ—Ä–∫–∞–π, –∑–≤–µ–∑–¥—É–π ‚≠ê ‚Äî —Ç–æ–ª—å–∫–æ –Ω–µ —Ö—Ä–∞–Ω–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –≤ –ø—É–±–ª–∏—á–Ω–æ–º —Ä–µ–ø–æ üòâ.
